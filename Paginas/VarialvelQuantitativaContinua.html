<!DOCTYPE html>
<html>

<head>
    <meta charset="utf8" />
    <LINK href="../bootstrap-4.1.3-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <LINK href="../bootstrap-4.1.3-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <LINK href="../css/csscontinua.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div id="fundoOpaco" onclick="fechafundo();"></div>
    <div id="nav" class="navbar sticky-top navbar-dark bg-light navbar-expand-lg">
        <div class="container">
            <img id="logoicon" src="../imgs/logo3.png" />
            <ul id="menulist2">
                <li><a href="home.html">INICIO</a></li>
            </ul>
        </div>
    </div>
    <p id="calc"></p>
    <div id="botõesMostrar" class="d-flex justify-content-center">
        <button id='MostrarTabela' onclick="mostrarElementos('tabela')" class="btn btn-info">tabela</button>
        <button id='MostrarGrafico' onclick="mostrarElementos('grafico')" class="btn btn-info">grafico</button>
        <button id='MostrarMedidas' onclick="mostrarElementos('medidas')" class="btn btn-info">Medidas</button>
        <button id='MostrarCalculadora' onclick="calculadora()" class="btn btn-info">Probabilidade</button>
    </div>

    <div id="graficocontinua" class="d-flex justify-content-center">
    </div>
   <div class="d-flex justify-content-center" id="divTabela">

    </div>

    
<div class="d-flex justify-content-center" id='Med'>
    <div id='caixaMedidas'>
        <h4>MEDIDAS</h4>
        <div id='elementosFixos'>

            <select id="selectCaixas" onchange="plotarMedidas()">
                <option>Selecione</option>
                <option value="Centrais"> Centrais </option>
                <option value="Dispersão">Dispersão</option>
                <option value="Quartil">Quartil</option>
                <option value="Decil"> Decil</option>
                <option value="Quintil"> Quintil </option>
                <option value="Percentil"> Percentil</option>
            </select>
        </div>
    
        <div id='selecionado'>

            <div id="Centro"></div>

            <div id='divQuartil'>
                <p>Quartil:

                    <select id="selectQ" onchange="Separatriz('Q')">
                        <option>Selecione</option>
                        <option value="Q1"> Q<sub>1</sub> </option>
                        <option value="Q2"> Q<sub>2</sub> </option>
                        <option value="Q3"> Q<sub>3</sub> </option>
                        <option value="Q4"> Q<sub>4</sub> </option>
                    </select>

                </p>


                <p id="resultadoQuartil" class="ResulSeparatrizes"></p>
            </div>


            <div id='divQuintil'>
                <p>Quintil:

                    <select id="selectK" onchange="Separatriz('K')">
                        <option>Selecione</option>
                        <option value="k1"> K<sub>1</sub> </option>
                        <option value="k2"> K<sub>2</sub> </option>
                        <option value="k3"> K<sub>3</sub> </option>
                        <option value="k4"> K<sub>4</sub> </option>
                        <option value="k5"> K<sub>5</sub> </option>
                    </select>

                </p>
                <p id="resultadoQuintil"></p>
            </div>

            <div id='divDecil'>
                <p>Decil:

                    <select id="selectD" onchange="Separatriz('D')">
                        <option>Selecione</option>
                        <option value="D1"> D<sub>1</sub> </option>
                        <option value="D2"> D<sub>2</sub> </option>
                        <option value="D3"> D<sub>3</sub> </option>
                        <option value="D4"> D<sub>4</sub> </option>
                        <option value="D5"> D<sub>5</sub> </option>
                        <option value="D6"> D<sub>6</sub> </option>
                        <option value="D7"> D<sub>7</sub> </option>
                        <option value="D8"> D<sub>8</sub> </option>
                        <option value="D9"> D<sub>9</sub> </option>
                        <option value="D10"> D<sub>10</sub> </option>
                    </select>

                </p>
                <p id="resultadoDecil"></p>
            </div>


            <div id='divPercentil'>
                <p>Percentil:

                    <input type="text" id="EntradaPercentil" size=5 onfocus="limpaSeparatriz('P')" />
                    <input type="button" onclick="Separatriz('P')" value="=" />
                </p>

                <p id="resultadoPercentil"></p>
            </div>
        </div>
    </div>
    </div>
    <!--AQUI QUE ACABOU A COPIAAAA-->
    <center><div id="divGrafico" class="continua">
        <p id="tituloGrafico"></p>
        <canvas id="grafico"></canvas>
    </div></center>

    <footer id="footer" class="footer footerpos">
        <div class="d-flex justify-content-center">
            <b>(16) 99321-1233</b>
            <b>info@Migueleiros.com</b>
            <b>© Migueleiros 2019. All Rights Reserved.</b>
        </div>
    </footer>
</body>




<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
<script src="../Scripts/cores.js"></script>
<style href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css"></style>
<script src="../Scripts/OrdenaçãoVetorPrincipal.js"></script>
<script src="../Scripts/modaContinua.js"></script>
<script src="../Scripts/SeparatrizC.js"></script>
<script src="../Scripts/DesvioPadrão&CoeficienteVariação.js"></script>
<script src="../Scripts/medianaContinua.js"></script>
<script src="../Scripts/limpaSeparatrizes.js"></script>
<script src="../Scripts/calculadoraEstatistica.js"></script>
<script src="../Scripts/TabelaDB.js"></script>
<script src="../Scripts/graficos.js"></script>
<script src="../Scripts/animar.js"></script>



<script type="text/javascript">



    objetoDadosUsuario = JSON.parse(window.localStorage.getItem('dadosFormulario'))
    vetor = objetoDadosUsuario.vetorUsuario
    document.getElementById('tituloGrafico').innerText = objetoDadosUsuario.nomeVar






    //document.getElementById('NomeDaVariavel')

    for (i = 0; i < vetor.length; i++) {
        vetor[i] = parseFloat(vetor[i])
    }


    vetor = InserçãoDireta(vetor)

    Amplitude = parseInt((vetor[vetor.length - 1] - vetor[0]) + 1)



    Classes = parseInt(Math.sqrt(vetor.length))

    if (Amplitude % Classes != 0 && Amplitude % (Classes + 1) != 0 && Amplitude % (Classes - 1) != 0) {
        do {
            Amplitude += 1


        } while (Amplitude % Classes != 0 && Amplitude % (Classes + 1) != 0 && Amplitude % (Classes - 1) != 0)
    }

    if (Amplitude % Classes == 0) {

        IntervaloClasses = Amplitude / Classes
    }
    else if (Amplitude % (Classes - 1) == 0) {
        IntervaloClasses = Amplitude / (Classes - 1)
    }
    else {
        IntervaloClasses = Amplitude / (Classes + 1)
    }
    //instanciando objeto(chave=intervalo, valor=vetor com limite dos intervalos)e vetor
    //para armazenar a string do intervalo ( as próprias chaves do objeto acima)
    objetoVetor = {}
    chaves = []



    //definindo os intervalos de classe,vetores com os intervalos,
    // calculo para a média, objeto para a moda e calculos para a mediana 



    inicioDoIntervalo = vetor[0]
    finalDoIntervalo = vetor[0] + IntervaloClasses

    vetorIntervalos = [[inicioDoIntervalo, finalDoIntervalo]]

    chaveObjeto = `${inicioDoIntervalo} |-- ${finalDoIntervalo}`
    acumuladorMedia = 0
    ObjetoMediaParaDispersão = {}


    objetoModa = {}


    vetorFrequenciaSimplesAcumulada = []


    // if(inicioDoIntervalo<=vetor[Math.round(vetor.length/2)]){
    // I= inicioDoIntervalo
    // }


    for (i = 0; i < Classes; i++) {

        intervalo = []
        inicioFinalIntervalo = []

        for (j = 0; j < vetor.length; j++) {
            if (vetor[j] >= inicioDoIntervalo && vetor[j] < finalDoIntervalo || i == Classes - 1 && vetor[j] == finalDoIntervalo) {
                intervalo.push(vetor[j])
            }
        }

        objetoModa[((inicioDoIntervalo + finalDoIntervalo) / 2).toFixed(2)] = intervalo.length

        chaves.push(chaveObjeto)
        acumuladorMedia += ((inicioDoIntervalo + finalDoIntervalo) / 2) * intervalo.length
        ObjetoMediaParaDispersão[chaveObjeto] = (inicioDoIntervalo + finalDoIntervalo) / 2
        objetoVetor[chaveObjeto] = intervalo
        inicioDoIntervalo = finalDoIntervalo
        finalDoIntervalo += IntervaloClasses
        chaveObjeto = `${inicioDoIntervalo} |-- ${finalDoIntervalo}`
        inicioFinalIntervalo.push(inicioDoIntervalo)
        inicioFinalIntervalo.push(finalDoIntervalo)
        vetorIntervalos.push(inicioFinalIntervalo)




    }
    //calculo da média 
    media = acumuladorMedia / vetor.length

    //criação de um vetor para armazenamento das frequencias simples 
    vetorFrequenciasSimples = []

    // inserção dos intervalos de classes e frequencias na tabela.


    //criação da tabela
    tabela = document.getElementById('divTabela').appendChild(document.createElement('table'))
    tabela.setAttribute('id','TQD')
   
    trCabeçalho = tabela.appendChild(document.createElement('tr'))
    trCabeçalho.style.backgroundColor='#ccc'
    
    thclasse=trCabeçalho.appendChild(document.createElement('th'))
    thclasse.innerText='Classes'
    
    thNomeVariavel= trCabeçalho.appendChild(document.createElement('th'))
    thNomeVariavel.id='NomeDaVariavel'
    thNomeVariavel.innerText=objetoDadosUsuario.nomeVar

    thF= trCabeçalho.appendChild(document.createElement('th'))
    thF.innerText='F*'

    thFc= trCabeçalho.appendChild(document.createElement('th'))
    thFc.innerText='Fc'

    thP= trCabeçalho.appendChild(document.createElement('th'))
    thP.innerText='P*'

    thPc= trCabeçalho.appendChild(document.createElement('th'))
    thPc.innerText='Pc'
    

    acumuladorFrequencia = 0
    acumuladorPercentual = 0
    for (i = 1; i < chaves.length + 1; i++) {

        linha = document.createElement('tr')
        linha.id = `linha${i}`
        document.getElementById('TQD').appendChild(linha)

        //inserçao dos n das classes na tabela 
        classe = document.createElement('td')
        classe.id = `classe${i}`
        classe.innerText = i
        document.getElementById(`linha${i}`).appendChild(classe)

        //inserção dos nomes dos intervalos na tabela
        nomeIntervalo = document.createElement('td')
        nomeIntervalo.id = `intervalo${i}`
        nomeIntervalo.innerText = chaves[i - 1]
        document.getElementById(`linha${i}`).appendChild(nomeIntervalo)

        //inserção da frequencia simples e inserção das frequencias em um vetor para cal. moda
        //acumulador de frequencias para o calculo da media ponderada. 


        frequenciaSimples = document.createElement('td')
        frequenciaSimples.id = `frequencia${i}`
        frequenciaSimples.innerText = objetoVetor[chaves[i - 1]].length
        document.getElementById(`linha${i}`).appendChild(frequenciaSimples)

        vetorFrequenciasSimples.push(parseInt(frequenciaSimples.innerText))
        acumuladorFrequencia += objetoVetor[chaves[i - 1]].length
        vetorFrequenciaSimplesAcumulada.push(acumuladorFrequencia)

        frequenciaAcumulada = document.createElement('td')
        frequenciaAcumulada.id = `fAcumulada${i}`
        frequenciaAcumulada.innerText = acumuladorFrequencia
        document.getElementById(`linha${i}`).appendChild(frequenciaAcumulada)

        calculo = 100 * objetoVetor[chaves[i - 1]].length / vetor.length
        calculoPercentualSimples = parseFloat(calculo.toFixed(1))

        percentualSimples = document.createElement('td')
        percentualSimples.id = `Psimples${i}`
        percentualSimples.innerText = calculoPercentualSimples + '%'
        document.getElementById(`linha${i}`).appendChild(percentualSimples)

        acumuladorPercentual += calculo

        percentualAcumulado = document.createElement('td')
        percentualAcumulado.id = `Pacumulado${i}`
        percentualAcumulado.innerText = parseFloat(acumuladorPercentual.toFixed(1)) + '%'
        document.getElementById(`linha${i}`).appendChild(percentualAcumulado)

    }

    animar('TQD')

    tmedia = document.createElement('p')
    tmedia.id = 'paragrafoMedia'
    tmedia.innerText = `Média: ${media.toFixed(2)}`
    document.getElementById("Centro").appendChild(tmedia)


    ParagrafoModa = document.getElementById("Centro").appendChild(document.createElement('p'))
    ParagrafoModa.id = 'ParagrafoModa'
    ParagrafoModa.innerText = 'Moda: ' + modaContínua(objetoModa)

    Pmediana = document.getElementById("Centro").appendChild(document.createElement('p'))
    Pmediana.id = 'ParagrafoMediana'
    Pmediana.innerText = `Mediana: ${MedianaContinua()}`



    CaixaMedDispersão = document.createElement('div')
    CaixaMedDispersão.id = 'caixaDispersão'
    document.getElementById('selecionado').appendChild(CaixaMedDispersão)


    ParagrafoDesvioPadrão = document.createElement('p')
    ParagrafoDesvioPadrão.id = 'ParagrafoDesvioPadrão'
    document.getElementById('caixaDispersão').appendChild(ParagrafoDesvioPadrão)
    ParagrafoDesvioPadrão.innerText = 'Desvio Padrão: ' + DesvioPadrão(ObjetoMediaParaDispersão)

    ParagrafoCoeficiente = document.createElement('p')
    ParagrafoCoeficiente.id = "paragrafoCoeficiente"
    document.getElementById('caixaDispersão').appendChild(ParagrafoCoeficiente)
    ParagrafoCoeficiente.innerText = "Coef. de Variação: " + CoeficienteDeVariação() + '%'


    grafico('Continua')

    mostrarElementos = function (x) {
        if (x == 'tabela') {
            

            document.getElementById('TQD').style.display = 'block'
            
            animar('TQD')
            
            document.getElementById('divGrafico').style.display = 'none'
            document.getElementById('caixaMedidas').style.display = 'none'
        }
        else if (x == 'grafico') {
            animar('divGrafico', 'aparecer')
            document.getElementById('TQD').style.display = 'none'
            document.getElementById('divGrafico').style.display = 'inline-block'

            document.getElementById('caixaMedidas').style.display = 'none'

        }
        else {
            animar('caixaMedidas', 'aparecer')
            document.getElementById('TQD').style.display = 'none'
            document.getElementById('divGrafico').style.display = 'none'
            document.getElementById('caixaMedidas').style.display = 'inline-block'
        }
    }
    plotarMedidas = function () {
        opção = document.getElementById('selectCaixas').value



        if (opção == 'Centrais') {

            document.getElementById('caixaDispersão').style.display = 'none'



            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'inline-block'

        }
        else if (opção == 'Dispersão') {


            document.getElementById('caixaDispersão').style.display = 'inline-block'

            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Quartil') {

            document.getElementById('caixaDispersão').style.display = 'none'

            document.getElementById('divQuartil').style.display = 'inline-block'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Decil') {

            document.getElementById('caixaDispersão').style.display = 'none'

            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'inline-block'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Quintil') {

            document.getElementById('caixaDispersão').style.display = 'none'

            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'inline-block'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Percentil') {

            document.getElementById('caixaDispersão').style.display = 'none'

            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'inline-block'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }


    }
</script>

<script src="../Scripts/funcoes.js"> </script>
<script src="../Scripts/calculadoraEstatistica.js"></script>
<script src="../Scripts/construtorDeElementosDaCalculadora.js"></script>
<script src="../Scripts/TabelaDB.js"></script>
<script type="text/javascript" src="../Scripts/verificadorEntradasCalculadora.js"></script>

</html>